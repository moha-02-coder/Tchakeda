
<div class="page-container">
  <div class="page-header">
    <button class="btn btn-light back-btn" (click)="back()">
      <i class="fas fa-arrow-left"></i> Recouvreurs
    </button>
    <h4 class="page-title">Détails du recouvreur</h4>
  </div>

  <!-- Modal de suppression -->
  <div *ngIf="showDeleteConfirm" class="modal-overlay">
    <div class="modal-card">
      <h5>Confirmer la suppression</h5>
      <p>Voulez-vous vraiment supprimer ce recouvreur ? Cette action est irréversible.</p>
      <div class="form-actions center">
        <button type="button" class="btn btn-light" (click)="showDeleteConfirm = false">Annuler</button>
        <button type="button" class="btn btn-danger" (click)="delete()">Supprimer</button>
      </div>
    </div>
  </div>

  <div class="form-card">
    <div class="card-header">
      <h5>Informations du recouvreur</h5>
      <div class="action-buttons">
        <ng-container *ngIf="!editMode">
          <button class="action-btn edit" (click)="editMode = true" title="Modifier les informations">
            <i class="fas fa-edit"></i>
          </button>
          <button class="action-btn delete" title="Supprimer le recouvreur" (click)="showDeleteConfirm = true">
            <i class="fas fa-trash"></i>
          </button>
        </ng-container>
        <ng-container *ngIf="editMode">
          <button class="action-btn save" type="button" title="Valider les modifications" (click)="save()">
            <i class="fas fa-check"></i>
          </button>
        </ng-container>
      </div>
    </div>

    <!-- Mode édition -->
    <form *ngIf="editMode" (ngSubmit)="save()" class="form-grid">
      <div class="form-group">
        <input type="text" id="fullName" [(ngModel)]="form.fullName" name="fullName" class="underline-input" required placeholder="Nom complet" />
        <label for="fullName" class="label">Nom complet</label>
      </div>
      <div class="form-group">
        <input type="text" id="country" [(ngModel)]="form.country" name="country" class="underline-input" required placeholder="Pays" />
        <label for="country" class="label">Pays</label>
      </div>
      <div class="form-group">
        <input type="text" id="address" [(ngModel)]="form.address" name="address" class="underline-input" required placeholder="Adresse" />
        <label for="address" class="label">Adresse</label>
      </div>
      <div class="form-group">
        <input type="number" id="houseCount" [(ngModel)]="form.houseCount" name="houseCount" class="underline-input" required min="0" placeholder="Nombre de maisons à recouvrer" />
        <label for="houseCount" class="label">Nombre de maisons à recouvrer</label>
      </div>
      <div class="form-group">
        <input type="text" id="phone" [(ngModel)]="form.phone" name="phone" class="underline-input" required placeholder="Téléphone" />
        <label for="phone" class="label">Téléphone</label>
      </div>
      <div class="form-group">
        <input type="email" id="email" [(ngModel)]="form.email" name="email" class="underline-input" required placeholder="Email" />
        <label for="email" class="label">Email</label>
      </div>
    </form>

    <!-- Mode visualisation -->
    <div *ngIf="!editMode" class="details-grid">
      <div class="form-group">
        <label>Nom complet</label>
        <p>{{ collector?.fullName || '-' }}</p>
      </div>
      <div class="form-group">
        <label>Pays</label>
        <p>{{ collector?.country || '-' }}</p>
      </div>
      <div class="form-group">
        <label>Adresse</label>
        <p>{{ collector?.address || '-' }}</p>
      </div>
      <div class="form-group">
        <label>Nombre de maisons à recouvrer</label>
        <p>{{ collector?.houseCount || '-' }}</p>
      </div>
      <div class="form-group">
        <label>Téléphone</label>
        <p>{{ collector?.phone || '-' }}</p>
      </div>
      <div class="form-group">
        <label>Email</label>
        <p>{{ collector?.email || '-' }}</p>
      </div>
    </div>
  </div>
</div>
