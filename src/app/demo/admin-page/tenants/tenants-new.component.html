<div class="page-header">
  <h4>Créer un locataire</h4>
</div>

<div class="content-container">
  <form (ngSubmit)="create()" class="form-card">
    <section>
      <h5>Informations personnelles</h5>
      <div class="tenant-grid">
        <div class="form-group">
          <input type="file" id="identityImage" accept="image/*" name="identityImage" class="tenant-photo-container" />
          <label for="identityImage" class="label">Photo d'identité <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.identityImage">{{ errors.identityImage }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="fullName" [(ngModel)]="form.fullName" name="fullName" class="underline-input" required placeholder="Nom complet" />
          <label for="fullName" class="label">Nom complet <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.fullName">{{ errors.fullName }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="country" [(ngModel)]="form.country" name="country" class="underline-input" required placeholder="Pays" />
          <label for="country" class="label">Pays <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.country">{{ errors.country }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="address" [(ngModel)]="form.address" name="address" class="underline-input" required placeholder="Adresse" />
          <label for="address" class="label">Adresse <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.address">{{ errors.address }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="phone" [(ngModel)]="form.phone" name="phone" class="underline-input" required placeholder="Téléphone" />
          <label for="phone" class="label">Téléphone <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.phone">{{ errors.phone }}</div>
        </div>
        <div class="form-group">
          <input type="email" id="email" [(ngModel)]="form.email" name="email" class="underline-input" required placeholder="Email" />
          <label for="email" class="label">Email <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.email">{{ errors.email }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="profession" [(ngModel)]="form.profession" name="profession" class="underline-input" placeholder="Profession" />
          <label for="profession" class="label">Profession</label>
        </div>
      </div>
      <div class="tenant-grid">
        <div class="form-group">
          <select id="identityType" [(ngModel)]="form.identityType" name="identityType" class="underline-input" required>
            <option value="">-- Sélectionner --</option>
            <option value="CNI">Carte Nationale d'Identité</option>
            <option value="Passeport">Passeport</option>
            <option value="Permis">Permis de conduire</option>
            <option value="Autre">Autre</option>
          </select>
          <label for="identityType" class="label">Type de pièce d'identité <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.identityType">{{ errors.identityType }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="identityNumber" [(ngModel)]="form.identityNumber" name="identityNumber" class="underline-input" required placeholder="Numéro de pièce d'identité" />
          <label for="identityNumber" class="label">Numéro de pièce d'identité <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.identityNumber">{{ errors.identityNumber }}</div>
        </div>
        <div class="form-group">
          <select id="maritalStatus" [(ngModel)]="form.maritalStatus" name="maritalStatus" class="underline-input">
            <option value="">-- Sélectionner --</option>
            <option value="Célibataire">Célibataire</option>
            <option value="Marié(e)">Marié(e)</option>
            <option value="Divorcé(e)">Divorcé(e)</option>
            <option value="Veuf(ve)">Veuf(ve)</option>
          </select>
          <label for="maritalStatus" class="label">Situation matrimoniale <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.maritalStatus">{{ errors.maritalStatus }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="emergencyContact" [(ngModel)]="form.emergencyContact" name="emergencyContact" class="underline-input" placeholder="Contact d'urgence" />
          <label for="emergencyContact" class="label">Contact d'urgence <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.emergencyContact">{{ errors.emergencyContact }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="rentalType" [(ngModel)]="form.rentalType" name="rentalType" class="underline-input" placeholder="Type de logement loué" />
          <label for="rentalType" class="label">Type de logement loué <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.rentalType">{{ errors.rentalType }}</div>
        </div>
      </div>
    </section>

<section>
    <!-- Toggle Personne affiliée -->
    <div class="affiliation-toggle-section" style="margin: 24px 0; display: flex; align-items: center; justify-content: space-between;">
      <span style="font-weight: 500;">Personne affiliée</span>
      <label class="switch">
        <input type="checkbox" [(ngModel)]="showAffiliated" name="showAffiliated" />
        <span class="slider round"></span>
      </label>
    </div>
    <!-- Personne affiliée -->
    <div class="form-card affiliation-section" *ngIf="showAffiliated">
      <div class="tenant-grid">
        <div class="form-group">
          <input type="text" id="affiliatedPersonRelation" [(ngModel)]="form.affiliatedPerson.relation" name="affiliatedPersonRelation" class="underline-input" placeholder="Type de relation" />
          <label for="affiliatedPersonRelation" class="label">Type de relation <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.affiliatedPersonRelation">{{ errors.affiliatedPersonRelation }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="affiliatedPersonFullName" [(ngModel)]="form.affiliatedPerson.fullName" name="affiliatedPersonFullName" class="underline-input" placeholder="Prénom et nom" />
          <label for="affiliatedPersonFullName" class="label">Prénom et nom <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.affiliatedPersonFullName">{{ errors.affiliatedPersonFullName }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="affiliatedPersonPhone" [(ngModel)]="form.affiliatedPerson.phone" name="affiliatedPersonPhone" class="underline-input" placeholder="Téléphone" />
          <label for="affiliatedPersonPhone" class="label">Téléphone <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.affiliatedPersonPhone">{{ errors.affiliatedPersonPhone }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="affiliatedPersonAddress" [(ngModel)]="form.affiliatedPerson.address" name="affiliatedPersonAddress" class="underline-input" placeholder="Adresse" />
          <label for="affiliatedPersonAddress" class="label">Adresse <span style="color:red">*</span></label>
          <div class="error" *ngIf="errors.affiliatedPersonAddress">{{ errors.affiliatedPersonAddress }}</div>
        </div>
        <div class="form-group">
          <input type="email" id="affiliatedPersonEmail" [(ngModel)]="form.affiliatedPerson.email" name="affiliatedPersonEmail" class="underline-input" placeholder="E-mail" />
          <label for="affiliatedPersonEmail" class="label">E-mail</label>
          <div class="error" *ngIf="errors.affiliatedPersonEmail">{{ errors.affiliatedPersonEmail }}</div>
        </div>
        <div class="form-group">
          <input type="text" id="affiliatedPersonProfession" [(ngModel)]="form.affiliatedPerson.profession" name="affiliatedPersonProfession" class="underline-input" placeholder="Profession" />
          <label for="affiliatedPersonProfession"class="label">Profession</label>
          <div class="error" *ngIf="errors.affiliatedPersonProfession">{{ errors.affiliatedPersonProfession }}</div>
        </div>
      </div>
    </div>
  </section>

    <!-- Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-light" (click)="cancel()">Annuler</button>
      <button type="submit" class="btn btn-primary">Créer</button>
    </div>
  </form>
</div>

